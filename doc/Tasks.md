# 项目开发任务清单

---

本文档将 PRD 中的里程碑分解为具体的、小颗粒度的开发任务，每项任务都附有明确的完成标准。

## 📊 项目进度概览
- **里程碑 1**: ✅ 完成 (5/5 任务)
- **里程碑 2**: ✅ 完成 (5/5 任务)
- **里程碑 3&4**: ✅ 完成 (6/6 任务)  
- **里程碑 5**: 🚀 **立即开始** - 支出过滤系统 (1/6 任务) - 包含类别管理架构
- **里程碑 6**: 📋 待开始 - 收入管理系统 (0/5 任务)
- **里程碑 7**: 📋 待开始 - 余额跟踪系统 (0/4 任务)
- **里程碑 8**: 📋 待开始 - 快速记账系统 (0/4 任务)
- **里程碑 9**: 📋 待开始 - 设置系统完善 (0/4 任务)
- **里程碑 10**: 🎯 **最后执行** - 统一数据持久化架构 (0/3 任务)

**总体进度**: 17/42 任务完成 (40%)

## 🔄 里程碑调整说明

### **第一次调整** - 持久化架构优化
**重要变更:** 为了更好的架构设计和开发效率，我们重新组织了里程碑的执行顺序：

1. **功能优先开发** (里程碑5-9)：先完成所有功能模块，让用户看到实际价值
2. **统一持久化架构** (里程碑10)：最后设计完整的多Context数据持久化方案，避免重复工作

### **第二次调整** - 类别管理架构提前 ⭐ **当前变更**
**实际开发发现：** 支出过滤功能依赖动态类别管理，需要先解决硬编码问题

**调整内容：**
- 🔄 **任务5.2**: 新增 - 实现动态类别管理系统（从里程碑9提前）
- 📝 **任务5.3-5.6**: 原任务5.2-5.5向后顺延
- 🎯 **任务9.1**: 调整为类别管理UI界面（依赖任务5.2的核心逻辑）

**优势:**
- ✅ 避免数据一致性问题（部分Context有持久化，部分没有）
- ✅ 减少重复架构修改（每个Context都要改持久化逻辑）  
- ✅ 统一的存储键、版本控制、数据迁移策略
- ✅ 功能优先，用户体验优先
- 🆕 **类别过滤功能基于动态类别管理，架构更合理**

---

## 里程碑 1: 项目搭建与基础路由 ✅ COMPLETED (预计 2-3 小时)

### 任务 1.1: 初始化 Vite + React 项目 ✅
- **描述:** 使用 Vite 创建一个新的 React 项目，并确保基础环境可以正常运行。
- **完成日期:** 2024-07-28
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 在终端执行 `npm create vite@latest my-react-app -- --template react` (或类似命令) 成功。
    2. 进入项目目录，执行 `npm install` 无错误。
    3. 执行 `npm run dev` 后，能在浏览器 `http://localhost:5173` (或指定端口) 看到默认的 React 应用页面。

### 任务 1.2: 引入 React Router 并规整目录结构 ✅
- **描述:** 安装 `react-router-dom` 并创建规范化的项目文件夹，为后续开发做准备。
- **完成日期:** 2024-07-28
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 执行 `npm install react-router-dom` 成功，`package.json` 中出现对应依赖。
    2. 在 `src` 目录下创建以下文件夹: `pages`, `components`, `context`, `hooks`。

### 任务 1.3: 创建路由页面占位组件 ✅
- **描述:** 根据 PRD 定义，为四个主要页面创建最基础的占位组件文件。
- **完成日期:** 2024-07-28
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 在 `src/pages` 目录下创建 `DashboardPage.jsx`, `ExpensesPage.jsx`, `BudgetPage.jsx`, `SettingsPage.jsx` 四个文件。
    2. 每个文件内都包含一个简单的 React 组件，该组件仅渲染一个带有页面名称的 `<h1>` 标签 (例如 `<h1>Dashboard</h1>`)。

### 任务 1.4: 配置应用主路由 ✅
- **描述:** 在 `App.jsx` 中配置路由，将 URL 路径映射到对应的页面组件。
- **完成日期:** 2024-07-28
- **预计耗时:** 1 小时
- **完成标准:**
    1. 在 `App.jsx` 或 `main.jsx` 中，使用 `createBrowserRouter` 和 `RouterProvider` 设置路由。
    2. 配置路径 `/`, `/expenses`, `/budget`, `/settings` 分别对应 `DashboardPage`, `ExpensesPage`, `BudgetPage`, `SettingsPage` 组件。
    3. 在浏览器中手动输入并访问这四个 URL，能够正确显示对应的页面标题。

### 任务 1.5: 创建全局导航组件 ✅
- **描述:** 创建一个在所有页面共享的导航栏，方便用户在不同功能间切换。
- **完成日期:** 2024-07-28
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 在 `src/components` 目录下创建 `Navbar.jsx`。
    2. `Navbar.jsx` 中使用 React Router 的 `Link` 或 `NavLink` 组件创建指向四个页面的导航链接。
    3. 将 `Navbar` 组件整合到 `App.jsx` 的布局中，确保它在所有页面都可见且可点击。

---

## 里程碑 2: 核心状态管理与记账功能 ✅ COMPLETED (预计 4-5 小时)

### 任务 2.1: 设计并实现 `expensesReducer` ✅
- **描述:** 使用 `useReducer` 的思想，定义管理所有支出记录的 state 结构和 reducer 函数。
- **完成日期:** 2024-07-28
- **预计耗时:** 1 小时
- **完成标准:**
    1. 创建 `src/context/expensesReducer.js` 文件。
    2. 在文件中定义支出的初始状态 `initialState` (例如一个空数组)。
    3. 实现 reducer 函数，该函数能处理 `'ADD_EXPENSE'`, `'DELETE_EXPENSE'`, `'EDIT_EXPENSE'` 三种 action 类型，并返回新的状态。

### 任务 2.2: 创建 `ExpensesContext` 并提供全局状态 ✅
- **描述:** 创建一个 React Context，利用 `useReducer` 将 state 和 dispatch 函数提供给整个应用。
- **预计耗时:** 1 小时
- **完成日期:** 2024-07-28
- **完成标准:**
    1. 创建 `src/context/ExpensesContext.jsx` 文件。
    2. 在文件中使用 `createContext` 创建 `ExpensesContext`。
    3. 创建 `ExpensesProvider` 组件，内部使用 `useReducer` 挂接 `expensesReducer`，并通过 Context.Provider 将 `state` 和 `dispatch` 暴露出去。
    4. 在 `App.jsx` 或 `main.jsx` 中，用 `ExpensesProvider` 包裹整个应用。

### 任务 2.3: 创建支出表单组件 (`ExpenseForm.jsx`) ✅
- **描述:** 构建一个可复用的表单，用于新增和编辑支出。
- **预计耗时:** 1 小时
- **完成日期:** 2024-07-28
- **完成标准:**
    1. 在 `src/components` 目录下创建 `ExpenseForm.jsx`。
    2. 组件内部使用 `useState` 管理表单字段（金额、类别、日期、备注）。
    3. 表单包含所有必要的输入元素，并有一个提交按钮。
    4. 组件能接收一个可选的 `expenseToEdit` prop，如果接收到该 prop，表单会用其数据初始化。

### 任务 2.4: 实现支出列表与新增功能 ✅
- **描述:** 在 `/expenses` 页面上，显示所有支出记录，并使用表单添加新的记录。
- **完成日期:** 2024-07-28
- **预计耗时:** 1 小时
- **完成标准:**
    1. 在 `ExpensesPage.jsx` 中，引入并使用 `ExpenseForm` 组件。
    2. 在页面中，消费 `ExpensesContext` 获取支出列表并将其渲染出来。[[memory:482701]]
    3. 当 `ExpenseForm` 提交时，调用 `dispatch` 函数并传入 `'ADD_EXPENSE'` action，新记录成功出现在列表中。

### 任务 2.5: 实现删除与编辑功能 ✅
- **描述:** 为每条支出记录添加删除和编辑的交互能力。
- **完成日期:** 2024-07-28
- **预计耗时:** 1 小时
- **完成标准:**
    1. 支出列表中的每一项旁边都有“编辑”和“删除”按钮。
    2. 点击“删除”按钮，会调用 `dispatch` 并传入 `'DELETE_EXPENSE'` action，对应记录从列表中消失。
    3. 点击“编辑”按钮，会将该条记录的数据传递给 `ExpenseForm`，使其进入编辑模式。表单提交后，调用 `dispatch` 并传入 `'EDIT_EXPENSE'` action，列表中的记录被更新。

---

## 里程碑 3 & 4: 预算、统计与优化 (预计 5.5-6.5 小时)

### 任务 3.1: 创建独立的预算管理系统✅
- **描述:** 采用分离设计原则，创建独立的预算状态管理系统，与支出管理系统解耦。
- **完成日期:** 2024-07-28
- **预计耗时:** 1 小时
- **完成标准:**
    1. 创建 `src/context/budgetsReducer.js` 文件，实现独立的预算 reducer 函数。
    2. 支持 `'SET_BUDGET'`, `'DELETE_BUDGET'`, `'CLEAR_ALL_BUDGETS'`，`'RESET_BUDGETS'` 四种 action 类型。
    3. 创建 `src/context/BudgetsContext.jsx` 文件，提供预算状态的 Context Provider。
    4. 预算数据结构采用对象格式：`{ '餐饮': 500, '交通': 200, ... }`。

### 任务 3.2: 实现预算设置功能 ✅
- **描述:** 在 `/budget` 页面，允许用户为不同类别设置预算，集成 BudgetsContext。
- **完成日期:** 2024-07-28
- **预计耗时:** 1 小时
- **完成标准:**
    1. 在 `App.jsx` 中添加 `BudgetsProvider`，确保预算状态在整个应用中可用。
    2. `BudgetPage.jsx` 使用 `useBudgets()` Hook 消费预算状态。
    3. 页面包含预算设置表单（类别选择 + 金额输入）和当前预算列表展示。
    4. 支持新增预算、修改现有预算、删除预算等操作。

### 任务 3.3: (useMemo) 计算并展示预算使用情况 ✅
- **描述:** 在预算页面动态计算并展示每个类别的已用/剩余预算。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 在 `BudgetPage.jsx` 中，消费 `state.expenses` 和 `state.budgets`。
    2. 使用 `useMemo` 计算每个类别的总支出。
    3. 页面清晰地展示每个类别的“预算”、“已用”和“剩余”金额。此计算仅在 `expenses` 或 `budgets` 变化时才重新执行。

### 任务 3.4: (useMemo) 实现统计面板 ✅
- **描述:** 在 `/dashboard` 页面，利用 `useMemo` 计算并展示当月总支出和各类别占比。
- **预计耗时:** 1 小时
- **完成标准:**
    1. `DashboardPage.jsx` 使用 `useMemo` 计算当月总支出并显示。
    2. `DashboardPage.jsx` 使用 `useMemo` 计算各类别支出占总支出的百分比并显示。
    3. 确保这些计算的依赖项数组设置正确，避免不必要的重复计算。

### 任务 3.5: 月度预算数据结构重构 ✅
- **描述:** 将预算系统从全时段预算改造为月度预算，支持不同月份的预算设置和历史查看。
- **完成日期:** 2024-12-19
- **预计耗时:** 1.5 小时
- **完成标准:**
    1. 重构 `budgetsReducer.js` 的数据结构，从 `{ '餐饮': 500 }` 改为 `[{ date: '2024-01', budgets: { '餐饮': 500 } }]` 格式。
    2. 更新所有 action 处理逻辑，支持按月份操作预算数据。 
    3. 在 `BudgetPage.jsx` 中添加月份过滤器，默认显示当前月份。 
    4. 修改 `BudgetForm.jsx`，支持为指定月份设置预算。
    5. 更新 `BudgetList.jsx` 中的 `useMemo` 计算逻辑，确保预算使用情况基于当前选中月份计算。

### 任务 3.6: (memo/useCallback) 性能优化 ✅
- **描述:** 对接收回调函数的子组件应用 `React.memo` 和 `useCallback` 进行性能优化。
- **完成日期:** 2024-12-19
- **预计耗时:** 1 小时
- **完成标准:**
    1. **创建 ExpenseItem 组件并应用 React.memo**
    2. **在 ExpensesPage.jsx 中使用 useCallback 优化事件处理函数**
    3. **重构支出列表渲染逻辑使用优化后的组件**

#### 子任务 3.6.1: 创建优化的 ExpenseItem 组件 ✅
- **描述:** 将单个支出项的渲染逻辑提取为独立组件，并用 React.memo 包裹实现性能优化。
- **预计耗时:** 20 分钟
- **完成标准:**
    1. 在 `src/components` 目录下创建 `ExpenseItem.jsx` 文件。
    2. 组件接收以下 props：`expense`、`onEdit`、`onDelete`。
    3. 使用 `React.memo()` 包裹组件，实现浅比较优化。
    4. 组件能正确显示支出的类别、金额、日期、备注信息。

#### 子任务 3.6.2: useCallback 优化事件处理函数 ✅
- **描述:** 在 ExpensesPage.jsx 中使用 useCallback 稳定化事件处理函数的引用。
- **预计耗时:** 20 分钟
- **完成标准:**
    1. 导入 `useCallback` Hook。
    2. 用 `useCallback` 包裹 `handleEdit` 函数，依赖项为空数组。
    3. 用 `useCallback` 包裹 `handleDelete` 函数，依赖项为 `[dispatch]`。
    4. 用 `useCallback` 包裹 `handleCancel` 函数，依赖项为 `[expensesToEdit]`。
    5. 用 `useCallback` 包裹 `handleEditSubmit` 函数，依赖项为 `[expensesToEdit]`。

#### 子任务 3.6.3: 重构支出列表渲染逻辑 ✅
- **描述:** 用优化后的 ExpenseItem 组件替换原有的内联渲染逻辑。
- **预计耗时:** 20 分钟
- **完成标准:**
    1. 导入 `ExpenseItem` 组件到 `ExpensesPage.jsx`。
    2. 将 `expenses.map()` 中的内联JSX替换为 `<ExpenseItem />` 组件调用。
    3. 正确传递所有必要的 props 给 `ExpenseItem`。
    4. 确保编辑、删除、取消等功能正常工作。
    5. 验证性能优化生效：添加新支出时，现有支出项不重新渲染。

---

## 里程碑 5: 支出过滤系统 + 类别管理架构 (预计 3-4 小时) 🚀

### 任务 5.1: 实现月度过滤功能 ✅
- **描述:** 在支出页面添加月度过滤器，与Dashboard保持一致的交互体验。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 在 `ExpensesPage.jsx` 中添加月份选择器组件。
    2. 使用 `useMemo` 根据选择的月份过滤支出记录。
    3. 过滤器状态与Dashboard的月度过滤器保持同步（可选）。
    4. 显示当前过滤条件下的支出统计信息。

### 任务 5.2: 🔄 **架构重构** - 实现动态类别管理系统
- **描述:** 将硬编码的类别改为动态管理，为类别过滤功能奠定基础。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 完善 `src/context/categoriesReducer.js`，实现类别的增删改操作。 ✅
    2. 完成 `src/context/CategoriesContext.jsx`，提供类别状态的 Context Provider。 ✅
    3. 在 `App.jsx` 中集成 `CategoriesProvider`，确保类别状态在整个应用中可用。 ✅
    4. **重构 `ExpenseForm.jsx`**，使用 `useCategories()` 替代硬编码的 `EXPENSE_CATEGORIES`。 ✅
    5. **重构 `BudgetForm.jsx`**，使用 `useCategories()` 替代硬编码的 `Options` 数组。 ✅
    6. 提供默认类别：餐饮、交通、购物、娱乐、医疗、教育、其他。 ✅
    7. 确保支出和预算使用相同的类别数据源，保持数据一致性。 ✅
    8. 在设置页面实现预算类别的增删改查

### 任务 5.3: 实现类别多选过滤
- **描述:** 基于动态类别系统，支持同时选择多个类别进行支出筛选。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 使用 `useCategories()` 获取所有可选类别。
    2. 创建类别多选组件，支持复选框选择。
    3. 使用 `useState` 管理选中的类别数组。
    4. 提供"全选"、"清空"、"反选"等快捷操作。
    5. 实时更新支出列表，显示选中类别的记录。

### 任务 5.4: 实现日期范围筛选
- **描述:** 提供自定义日期范围选择，支持任意时间段的支出查看。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 添加开始日期和结束日期输入框。
    2. 提供快捷时间段选择（本周、本月、上月、最近7天、最近30天）。
    3. 日期验证：结束日期不能早于开始日期。
    4. 支出列表根据日期范围实时过滤。

### 任务 5.5: 实现金额范围筛选
- **描述:** 支持按金额区间筛选支出，便于查找特定金额的消费记录。
- **预计耗时:** 0.3 小时
- **完成标准:**
    1. 添加最小金额和最大金额输入框。
    2. 支持数字输入验证，最小值不能大于最大值。
    3. 提供常用金额范围快捷选择（0-50、50-200、200-500等）。
    4. 显示筛选结果的统计信息（总金额、平均金额）。

### 任务 5.6: 实现搜索功能
- **描述:** 通过备注内容模糊搜索支出记录，支持关键词高亮显示。
- **预计耗时:** 0.7 小时
- **完成标准:**
    1. 添加搜索输入框，支持实时搜索。
    2. 实现备注内容的模糊匹配算法。
    3. 高亮显示匹配的关键词（可选）。
    4. 搜索结果显示匹配条数和相关统计。

---

## 里程碑 6: 收入管理系统 (预计 3-4 小时)

### 任务 6.1: 创建收入状态管理系统
- **描述:** 参照支出管理系统，创建独立的收入状态管理架构。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 创建 `src/context/incomesReducer.js` 文件，实现收入的增删改操作。
    2. 定义收入数据结构，包含 id、amount、source、note、date 等字段。
    3. 创建 `src/context/IncomesContext.jsx`，提供收入状态的 Context Provider。
    4. 在 `App.jsx` 中集成 `IncomesProvider`。

### 任务 6.2: 创建收入录入组件
- **描述:** 构建收入录入表单，支持新增和编辑收入记录。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 创建 `src/components/IncomeForm.jsx` 组件。
    2. 表单包含金额、收入来源、日期、备注等字段。
    3. 收入来源支持：工资、兼职、投资、其他等预设选项。
    4. 支持编辑模式，可接收 `incomeToEdit` prop。

### 任务 6.3: 实现收入列表展示
- **描述:** 在适当位置展示收入记录列表，支持基本的查看和管理操作。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 创建收入列表组件，可集成到 `ExpensesPage.jsx` 或独立页面。
    2. 列表显示收入的关键信息：金额、来源、日期。
    3. 每条记录提供编辑和删除操作。
    4. 显示收入记录总数和总金额统计。

### 任务 6.4: 收入管理功能集成
- **描述:** 完善收入的编辑、删除功能，确保数据一致性。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 实现收入记录的编辑功能，支持修改所有字段。
    2. 实现收入记录的删除功能，包含确认提示。
    3. 收入数据变化后，相关统计和余额计算实时更新。
    4. 收入操作的错误处理和用户反馈。

### 任务 6.5: 收入过滤功能
- **描述:** 为收入管理提供与支出类似的过滤功能。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 支持按月度过滤收入记录。
    2. 支持按收入来源筛选。
    3. 支持按日期范围和金额范围筛选。
    4. 提供收入记录的搜索功能。

---

## 里程碑 7: 余额跟踪系统 (预计 2-3 小时)

### 任务 7.1: 实现基础余额计算
- **描述:** 创建跨Context的余额计算逻辑，提供实时的财务状况。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 创建 `src/hooks/useAccountBalance.js` 自定义Hook。
    2. Hook中消费 `ExpensesContext` 和 `IncomesContext`。
    3. 使用 `useMemo` 计算总收入、总支出、当前余额。
    4. 支持按月度、按日期范围计算余额。

### 任务 7.2: Dashboard余额显示
- **描述:** 在Dashboard显眼位置展示当前余额和相关财务指标。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 在 `DashboardPage.jsx` 中集成余额显示。
    2. 余额为正时显示绿色，为负时显示红色警告。
    3. 显示当月收入、支出、余额的对比信息。
    4. 余额变化的简单可视化（增长/下降趋势）。

### 任务 7.3: 余额趋势分析
- **描述:** 提供月度余额变化趋势，帮助用户了解财务健康状况。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 计算最近几个月的余额变化数据。
    2. 标识正向增长和负向下降。
    3. 提供简单的趋势图或表格展示。
    4. 余额预警功能：低余额或负余额提醒。

### 任务 7.4: 财务摘要组件
- **描述:** 创建综合的财务摘要组件，集成收支和余额信息。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 创建 `src/components/FinancialSummary.jsx` 组件。
    2. 显示当月和累计的收入、支出、余额统计。
    3. 计算并显示储蓄率（余额/收入比例）。
    4. 组件可在Dashboard和其他页面复用。

---

## 里程碑 8: 快速记账系统 (预计 2-3 小时)

### 任务 8.1: 设计模板数据管理
- **描述:** 创建支出模板的数据结构和状态管理系统。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 定义模板数据结构：id、name、amount、category、note、isFrequent。
    2. 创建 `src/context/templatesReducer.js`，管理模板增删改操作。
    3. 创建 `src/context/TemplatesContext.jsx`，提供模板状态管理。
    4. 模板数据持久化到 `localStorage`。

### 任务 8.2: 实现模板管理界面
- **描述:** 在设置页面添加模板管理功能，支持创建和编辑模板。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 在 `SettingsPage.jsx` 中添加模板管理区域。
    2. 支持创建新模板，填入名称、金额、类别、备注。
    3. 显示现有模板列表，支持编辑和删除。
    4. 支持标记常用模板，优先显示。

### 任务 8.3: 快速记账功能集成
- **描述:** 在支出录入表单中集成模板选择功能。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 在 `ExpenseForm.jsx` 中添加模板选择器。
    2. 选择模板后自动填充表单字段。
    3. 支持基于模板的一键记账。
    4. 模板使用后可选择保存为新记录。

### 任务 8.4: 智能推荐算法
- **描述:** 基于历史数据实现智能支出推荐功能。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 创建 `src/hooks/useSmartSuggestions.js` 自定义Hook。
    2. 分析用户的支出模式，识别高频支出组合。
    3. 在记账时提供智能建议（类别+金额的常见组合）。
    4. 支持一键采用建议，快速填入表单。

---

## 里程碑 9: 设置系统完善 (预计 2-3 小时)

### 任务 9.1: 类别管理UI界面
- **描述:** 在设置页面为类别管理系统提供完整的用户界面（基于任务5.2的核心逻辑）。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 在 `SettingsPage.jsx` 中创建类别管理界面。
    2. 使用 `useCategories()` 显示当前所有类别。
    3. 提供添加新类别的表单，集成验证和错误处理。
    4. 支持重命名现有类别，使用类别管理系统的编辑功能。
    5. 支持删除类别，提供确认提示和数据影响说明。

### 任务 9.2: 默认值设置功能
- **描述:** 允许用户自定义常用的默认值，简化日常操作。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. 创建默认值设置界面，包含默认类别、默认金额等。
    2. 设置默认日期行为：今天、昨天、手动选择。
    3. 新建记录时自动填入用户设置的默认值。
    4. 支持重置为系统默认设置。

### 任务 9.3: 数据导入导出功能
- **描述:** 提供数据备份和迁移功能，确保用户数据安全。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 实现数据导出为JSON格式文件。
    2. 支持导入JSON格式的数据文件。
    3. 导入时验证数据格式，处理版本兼容性。
    4. 提供数据清空和应用重置功能。
    5. 操作前提供确认提示，防止误操作。

### 任务 9.4: 应用设置优化
- **描述:** 完善设置页面的整体用户体验和功能组织。
- **预计耗时:** 0.5 小时`````````````````````
- **完成标准:**
    1. 优化设置页面的布局和导航。
    2. 将设置功能分组：类别管理、默认值、模板管理、数据管理。
    3. 添加设置项的帮助说明和使用提示。
    4. 实现设置的即时保存和状态反馈。

---

## 里程碑 10: 统一数据持久化架构 (预计 2-3 小时) 🎯

### 任务 10.1: 设计统一持久化架构
- **描述:** 设计和实现统一的多Context数据持久化方案。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 创建 `src/hooks/useAppPersistence.js` 统一持久化Hook。
    2. 设计统一的数据存储格式：`{ expenses: [], incomes: [], budgets: [], templates: [], settings: {} }`。
    3. 实现版本控制和数据迁移机制。
    4. 统一localStorage键名管理，避免冲突。

### 任务 10.2: 集成所有Context持久化
- **描述:** 将所有Context的数据纳入统一持久化管理。
- **预计耗时:** 1 小时
- **完成标准:**
    1. 修改 `ExpensesContext`、`BudgetsContext`、`IncomesContext`、`TemplatesContext` 集成持久化。
    2. 使用统一的数据加载和保存逻辑。
    3. 实现数据变化的批量保存，避免频繁写入。
    4. 添加数据保存状态指示（保存中、已保存、保存失败）。

### 任务 10.3: 持久化错误处理和恢复
- **描述:** 完善持久化的错误处理机制和数据恢复功能。
- **预计耗时:** 0.5 小时
- **完成标准:**
    1. localStorage 读写异常的错误处理。
    2. 数据损坏时的恢复策略（使用默认值）。
    3. 提供手动触发数据备份和恢复功能。
    4. 添加数据完整性验证。

---

## 📊 更新后的项目进度概览
- **里程碑 1**: ✅ 完成 (5/5 任务)
- **里程碑 2**: ✅ 完成 (5/5 任务)
- **里程碑 3&4**: ✅ 完成 (6/6 任务)  
- **里程碑 5**: 🚀 **进行中** - 支出过滤系统 (1/6 任务) - 包含类别管理架构
- **里程碑 6**: 📋 待开始 - 收入管理系统 (0/5 任务)
- **里程碑 7**: 📋 待开始 - 余额跟踪系统 (0/4 任务)
- **里程碑 8**: 📋 待开始 - 快速记账系统 (0/4 任务)
- **里程碑 9**: 📋 待开始 - 设置系统完善 (0/4 任务)
- **里程碑 10**: 📋 重新设计 - 统一数据持久化架构 (0/3 任务) - 🎯 **最后执行**

**总体进度**: 17/42 任务完成 (40%) 