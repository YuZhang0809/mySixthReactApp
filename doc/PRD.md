
# 产品需求文档 (PRD): Expense & Budget SPA

---

## 1. 项目概述

**项目名称:** Expense & Budget SPA (简易记账与预算管理单页应用)

**目标:**
- **业务目标:** 为用户提供一个轻量、简洁的工具，用于记录日常支出、设置分类预算，并直观地了解个人财务状况。
- **学习目标:** 作为一次实战演练，深度掌握 React 生态中的核心与进阶知识点，包括但不限于 React Router、`useReducer`, `useMemo`, `useCallback`, `useEffect` 与 `Context` API，并结合 `localStorage` 实现数据持久化。

**目标用户:** 期望通过构建一个完整的 SPA 项目来巩固和提升 React 技能的开发者 (即您本人)。

---

## 2. 核心功能 (MVP)

我们将以用户故事的形式定义 MVP 的核心功能范围。

### 2.1 用户故事

| 模块 | 用户故事 ID | 作为用户, 我想要... | 以便我能够... | 验收标准 (AC) | 涉及知识点 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **记账管理** | **US-001** | 新增一笔支出，包含金额、类别、日期和备注 | 记录我的每一笔花费 | 1. 提供一个表单，包含金额(数字)、类别(下拉选择)、日期(日期选择器)、备注(文本框)输入字段。<br>2. 提交后，新的支出项会出现在支出列表中。<br>3. 表单提交后被清空。 | `useState`, `useReducer` |
| | **US-002** | 编辑一笔已存在的支出记录 | 修正录入的错误信息 | 1. 每条支出记录旁都有一个 "编辑" 按钮。<br>2. 点击后，表单中会填入该记录的现有数据。<br>3. 提交后，对应记录在列表中被更新。 | `useState`, `useReducer` |
| | **US-003** | 删除一笔支出记录 | 移除不再需要或错误的记录 | 1. 每条支出记录旁都有一个 "删除" 按钮。<br>2. 点击并确认后，该记录从列表中移除。 | `useReducer` |
| **预算管理** | **US-004** | 为不同的支出类别设置月度预算 | 控制我在各个领域的消费 | 1. 在专门的预算页面 (`/budget`)，可以为每个类别输入预算金额。<br>2. 设置的预算金额被成功保存。 | `useState`, `useReducer` |
| | **US-005** | 查看每个类别的预算使用情况 | 了解我的消费是否超支 | 1. 预算页面清晰展示各类别“已用金额”、“预算金额”与“剩余额度”。<br>2. "已用金额" 能实时根据支出记录更新。 | `useMemo` |
| **统计面板** | **US-006** | 在统计面板看到当月总支出 | 快速了解本月的整体财务状况 | 1. 仪表盘页面 (`/dashboard`) 显眼位置展示当月所有支出的总和。<br>2. 该计算值应在支出数据变化时自动更新。 | `useMemo` |
| | **US-007** | 在统计面板看到各类别支出占比 | 分析我的主要消费方向 | 1. 仪表盘以列表或图表形式，展示各类别支出占当月总支出的百分比。<br>2. 该数据应由支出记录派生计算得出，且性能开销合理。 | `useMemo` |
| **应用基础** | **US-008** | 在不同功能页面间自由导航 | 方便地使用应用的各项功能 | 1. 应用包含 `/dashboard`, `/expenses`, `/budget`, `/settings` 四个路由。<br>2. 提供一个常驻的导航栏，点击后可切换页面，且浏览器不发生刷新。 | `React Router` |
| | **US-009** | 我的所有数据（支出和预算）可以在关闭浏览器后保留 | 不丢失我录入的宝贵数据 | 1. 所有的支出记录和预算设置都存储在浏览器的 `localStorage` 中。<br>2. 当应用再次打开时，会自动从 `localStorage` 加载并显示之前的数据。 | `useEffect` |
| | **US-010** | 优化高频更新组件的性能 | 确保应用在高频操作（如快速修改金额）下依然流畅 | 1. 对于接收回调函数的子组件，使用 `React.memo` 进行包裹。<br>2. 传递给这些组件的回调函数，使用 `useCallback` 进行包裹以保持引用稳定，避免不必要的重渲染。 | `React.memo`, `useCallback` |

---

## 3. 技术栈

- **前端框架:** React 19
- **构建工具:** Vite
- **编程语言:** JavaScript
- **路由:** React Router
- **样式:** 纯 CSS 或内联样式 (非本次练习重点)
- **数据持久化:** `localStorage`

---

## 4. 里程碑 (建议)

建议将项目拆分为以下几个开发里程碑：

1.  **里程碑 1: 项目搭建与基础路由**
    - 使用 Vite 初始化 React 项目。
    - 安装 `react-router-dom` 并配置好 `/dashboard`, `/expenses`, `/budget`, `/settings` 四个页面的基本路由结构和占位组件。

2.  **里程碑 2: 核心状态管理与记账功能**
    - 使用 `useReducer` 设计并实现管理所有支出的 state 逻辑 (增、删、改)。
    - 在 `/expenses` 页面实现完整的记账功能 (US-001, US-002, US-003)。

3.  **里程碑 3: 预算管理**
    - 设计预算数据的 state 结构。
    - 在 `/budget` 页面实现预算的设置与展示功能 (US-004, US-005)。

4.  **里程碑 4: 统计面板与性能优化**
    - 在 `/dashboard` 页面利用 `useMemo` 实现复杂的派生计算，完成统计功能 (US-006, US-007)。
    - 识别并应用 `React.memo` 和 `useCallback` 对相关组件进行性能优化 (US-010)。

5.  **里程碑 5: 数据持久化**
    - 使用 `useEffect` Hook 将支出和预算数据同步到 `localStorage`，并在应用启动时加载 (US-009)。

---

## 5. 不在范围内的功能 (Non-MVP)

为了聚焦于核心学习目标，以下功能暂不考虑：

- 用户认证与多用户系统
- 后端数据库存储
- 复杂的数据可视化图表 (如 ECharts)
- 主题切换 (暗黑模式等，可视情况作为附加练习)
- 响应式设计与移动端适配 