# 学习备忘录 (Learning Memo)

---

本文档用于自动记录在构建 "Expense & Budget SPA" 过程中遇到的关键知识点、最佳实践和重要概念，以便于学习沉淀和未来回顾。

每条记录都会包含日期、主题、以及具体的知识点或感悟。

---

### 2024-07-28: 项目启动与规划

*   **知识点:** **结构化项目规划的重要性**
*   **感悟:** 在编写任何代码之前，通过创建产品需求文档 (PRD) 和详细的任务清单 (Tasks)，可以极大地提高开发效率和项目成功率。
    *   **PRD (`doc/PRD.md`)** 的作用是定义"做什么"(What) 和"为什么做"(Why)，它统一了我们对项目范围和目标的认知。
    *   **任务清单 (`doc/Tasks.md`)** 的作用是定义"怎么做"(How)，它将宏大的目标分解为可管理、可执行的小步骤，让每一步都清晰可见。
*   **最佳实践:** 先规划，后编码。一个清晰的路线图远比仓促开始写代码更有价值。

---

### 2024-07-28: useReducer 状态管理设计

*   **知识点:** **useReducer vs useState 的选择标准**
*   **核心概念:** 
    *   **useState**: 适合简单状态 (字符串、数字、布尔值、简单对象)
    *   **useReducer**: 适合复杂状态管理，特别是当状态变更逻辑复杂、有多种操作类型、或下一个状态依赖于前一个状态时
*   **设计模式:** 
    *   **Action 类型常量化**: 使用 `EXPENSE_ACTIONS` 对象管理所有 action 类型，避免字符串拼写错误
    *   **不可变性原则**: 永远返回新的状态对象，不直接修改原状态
    *   **数据结构设计**: 考虑完整的数据生命周期 (创建时间、修改时间、唯一标识)
*   **最佳实践:** 
    *   在 reducer 中集中处理所有状态变更逻辑，保证状态变更的可预测性
    *   使用辅助函数 (如 `_generateId`) 处理重复逻辑，保持 reducer 的简洁性
    *   详细的注释和数据结构文档有助于代码维护
*   **代码审查收获:**
    *   数组操作要格外小心：`[...state, newItem]` vs `[state, ...newItem]` 结果完全不同
    *   `map()` 返回数组，不需要额外包装：`state.map()` ✅ vs `[state.map()]` ❌
    *   严格比较 (`===`) 比宽松比较 (`==`) 更安全，避免意外的类型转换 